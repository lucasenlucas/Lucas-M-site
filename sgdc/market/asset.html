<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SGDC Live ‚Äî Asset</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet"/>
<style>
:root{
  --bg:#0E1023; --panel:#17193A; --card:#131736; --text:#E9ECFF; --muted:#A3A9D8;
  --good:#4BD37B; --bad:#FF6B6B; --border:#FFFFFF1A; --shadow:0 18px 40px rgba(0,0,0,.45);
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,sans-serif;background:radial-gradient(1200px 600px at 10% -10%,#14183d 0,#0E1023 60%);color:var(--text)}

.nav{max-width:1200px;margin:0 auto;padding:12px 16px;display:flex;align-items:center;gap:10px}
.back{border:1px solid var(--border);background:#ffffff14;padding:8px 12px;border-radius:12px;text-decoration:none;color:var(--text);font-weight:600}
.spacer{flex:1}
.balance{font-weight:800;color:var(--good)}
.help{cursor:pointer;font-weight:800;border:1px solid var(--border);background:#ffffff14;padding:8px 12px;border-radius:12px}

.container{max-width:1200px;margin:0 auto;padding:18px 16px 60px}
.head{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.title{font-weight:800;font-size:22px}
.ticker{font-size:12px;color:var(--muted)}
.pill{background:#ffffff1a;border:1px solid var(--border);padding:6px 10px;border-radius:999px;font-size:12px}
.pill.up{color:var(--good)} .pill.down{color:var(--bad)}
.stats{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
.chip{border:1px solid #ffffff22;background:#ffffff10;padding:8px 12px;border-radius:12px}

.grid{display:grid;grid-template-columns:1.2fr .8fr;gap:16px;margin-top:16px}
@media (max-width:900px){ .grid{grid-template-columns:1fr } }
.card{background:linear-gradient(180deg,var(--card),#101432);border:1px solid var(--border);border-radius:18px;padding:14px;box-shadow:var(--shadow)}

canvas{width:100%;height:280px;display:block}
.tf{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
.btn{padding:8px 12px;border-radius:12px;border:1px solid var(--border);background:#ffffff14;color:var(--text);cursor:pointer;font-weight:700}
.btn.active{background:#ffffff26}

.field{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}
input[type=number]{background:#0f1330;color:var(--text);border:1px solid var(--border);border-radius:12px;padding:10px}
.actions{display:flex;gap:8px;flex-wrap:wrap}
.buy{background:linear-gradient(90deg,#37d87c,#2bb56a);border:none}
.sell{background:#ffd66b;border:none;color:#0d0b06}
.swap{background:#9c7cff;border:none}

/* Onboarding */
#onboard{position:fixed;inset:0;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:9999}
.on-card{background:#15193A;border-radius:20px;padding:24px;max-width:500px;width:90%;color:var(--text);box-shadow:var(--shadow);text-align:center}
.on-card h2{margin:0 0 12px;font-size:22px}
.on-card p{margin:0 0 18px;color:var(--muted)}
.on-buttons{display:flex;justify-content:center;gap:10px}
.on-btn{background:#8a7cff;border:none;padding:10px 16px;border-radius:12px;font-weight:700;color:#fff;cursor:pointer}
.on-btn.alt{background:#444}
</style>
</head>
<body>
  <nav class="nav">
    <a class="back" href="./">‚Üê Terug</a>
    <div class="spacer"></div>
    <div class="balance">Bits: <span id="bitsHeader">0</span></div>
    <div class="help" id="helpBtn">?</div>
  </nav>

  <main class="container">
    <div class="head">
      <div id="icon" class="pill">üì¶</div>
      <div class="title" id="name">Asset</div>
      <div class="ticker" id="ticker">TICK</div>
      <div class="pill" id="dayDelta">+0.00%</div>
      <div class="pill" id="price">‚Çø0.00</div>
    </div>

    <div class="stats" id="statsLine"></div>

    <div class="grid">
      <div class="card">
        <canvas id="chart" width="1000" height="280"></canvas>
        <div class="tf">
          <button class="btn active" data-tf="1h">1h</button>
          <button class="btn" data-tf="1d">1d</button>
          <button class="btn" data-tf="1w">1w</button>
          <button class="btn" data-tf="1m">1m</button>
          <button class="btn" data-tf="all">All</button>
        </div>
      </div>

      <div class="card">
        <div class="field">
          <label>Koop ‚Äî bedrag in Bits</label>
          <input type="number" id="buyBits" min="1" value="10"/>
          <div class="actions">
            <button class="btn buy" id="btnBuy">Kopen</button>
            <button class="btn swap" id="btnSwap">Swap</button>
          </div>
        </div>

        <div class="field">
          <label>Verkoop ‚Äî aantal stuks</label>
          <input type="number" id="sellQty" min="1" value="1"/>
          <div class="actions">
            <button class="btn sell" id="btnSell">Verkopen</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Onboarding -->
  <div id="onboard" style="display:none">
    <div class="on-card">
      <h2 id="onTitle">Welkom bij Asset detail</h2>
      <p id="onText">Hier zie je grafieken, je posities en kun je kopen en verkopen.</p>
      <div class="on-buttons">
        <button class="on-btn alt" id="onPrev" style="display:none">Vorige</button>
        <button class="on-btn" id="onNext">Volgende</button>
      </div>
    </div>
  </div>

<script>
// --- Bits koppeling ---
const STORAGE_KEY='sgdc.bits';
const balanceEl=document.getElementById('bitsHeader');
let balance=Number.parseInt(localStorage.getItem(STORAGE_KEY)??'0',10);
if(Number.isNaN(balance)) balance=0;
function renderBits(){balanceEl.textContent=balance;}
function setBits(v){balance=Math.max(0,Math.floor(Number(v)||0));localStorage.setItem(STORAGE_KEY,String(balance));renderBits();}
function addBits(a){setBits(balance+Number(a||0));}
function resetBits(){localStorage.removeItem(STORAGE_KEY);setBits(0);}
window.sgdcBits={get:()=>balance,set:setBits,add:addBits,reset:resetBits,key:STORAGE_KEY};
renderBits();

// --- Dummy asset data (zelfde als index) ---
const params=new URLSearchParams(location.search);
const sym=params.get('symbol')||'SNK';
const assets={
  SNK:{name:"Snacko",icon:"üç™",price:95,yClose:90},
  FRIK:{name:"Frikandelium",icon:"üå≠",price:42,yClose:45},
  COKE:{name:"ColaCap",icon:"ü•§",price:60,yClose:62},
  BBIT:{name:"Bitterbit",icon:"üü§",price:33,yClose:31}
};
const a=assets[sym]||{name:sym,icon:'üì¶',price:50,yClose:50};

// --- Init UI ---
document.getElementById('icon').textContent=a.icon;
document.getElementById('name').textContent=a.name;
document.getElementById('ticker').textContent=sym;
document.getElementById('price').textContent='‚Çø'+a.price;
const pct=((a.price-a.yClose)/a.yClose*100).toFixed(2);
const dd=document.getElementById('dayDelta');
dd.textContent=(pct>=0?'+':'')+pct+'%';dd.className='pill '+(pct>=0?'up':'down');

// --- Simple stats (in dit voorbeeld: dummy, je kunt koppelen aan echte posities) ---
function renderStats(){
  document.getElementById('statsLine').innerHTML=`
    <div class="chip">Ingelegd: <strong>‚Çø0.00</strong></div>
    <div class="chip">Huidige waarde: <strong>‚Çø0.00</strong></div>
    <div class="chip">P/L: <strong>‚Çø0.00</strong></div>`;
}
renderStats();

// --- Chart tekenen ---
const c=document.getElementById('chart');const ctx=c.getContext('2d');
function draw(tf='1h'){
  ctx.clearRect(0,0,c.width,c.height);
  ctx.strokeStyle='#8a7cff';ctx.beginPath();
  for(let i=0;i<100;i++){const x=i*10,y=140+Math.sin(i/10)*50;if(i===0)ctx.moveTo(x,y);else ctx.lineTo(x,y);}
  ctx.stroke();
}
draw('1h');
document.querySelectorAll('.tf .btn').forEach(b=>b.onclick=()=>{document.querySelectorAll('.tf .btn').forEach(x=>x.classList.remove('active'));b.classList.add('active');draw(b.dataset.tf);});

// --- Actions (dummy logica) ---
document.getElementById('btnBuy').onclick=()=>{alert('Koopfunctie voor '+sym);};
document.getElementById('btnSell').onclick=()=>{alert('Verkoopfunctie voor '+sym);};
document.getElementById('btnSwap').onclick=()=>{alert('Swapfunctie voor '+sym);};

// --- Onboarding ---
const steps=[
 {t:"Welkom bij Asset detail",x:"Hier zie je grafieken, je posities en je kan kopen en verkopen."},
 {t:"Grafiek",x:"De grafiek laat koersverloop zien. Markers tonen jouw trades."},
 {t:"Kopen/Verkopen",x:"Gebruik de invoervelden om met Bits te handelen."},
 {t:"Succes!",x:"Veel succes met je investeringen!"}
];
let step=0;
const onboard=document.getElementById('onboard');
const onTitle=document.getElementById('onTitle');
const onText=document.getElementById('onText');
const onPrev=document.getElementById('onPrev');
const onNext=document.getElementById('onNext');
function showStep(i){step=i;onTitle.textContent=steps[i].t;onText.textContent=steps[i].x;onPrev.style.display=i>0?'inline-block':'none';onNext.textContent=i===steps.length-1?'Start!':'Volgende';}
onPrev.onclick=()=>showStep(step-1);
onNext.onclick=()=>{if(step<steps.length-1)showStep(step+1);else{onboard.style.display='none';localStorage.setItem('sgdc.asset.onboarded','1');}};
document.getElementById('helpBtn').onclick=()=>{onboard.style.display='flex';showStep(0);};
if(!localStorage.getItem('sgdc.asset.onboarded')){onboard.style.display='flex';showStep(0);}
</script>
</body>
</html>
